<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
  <%- include("partials/viewNavbar.ejs",{username:username,fname:fname}) %>
  <h1>Welcome <%=fname  %> for your weight <%=status  %> journey </h1>
  <!-- <h3> Change in weight</h3> -->
  <div>
  <h2>Daily Goal </h2>
  <h4>calories consumed today:<%=cal_con_goal %>   / <%=cal_after_diet  %>      calories burned today: <%=cal_burn_goal %>  / <%=cal_after_exercise  %></h4>
  </div>
  <h2>Weekly Goal</h2>
  <h4>calories consumed in this week:<%=(cal_con_goal*7).toFixed(2)%>  / <%=cal_cons_week  %>          calories burned in this week:<%=(cal_burn_goal*7).toFixed(2)%>   / <%=cal_burn_week  %></h4>

 <% if(locals.firstTime){%>
  <div id="popup" class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <p>Hey <%=fname%>! ðŸŒŸ Looks like you're on a journey to your ideal weight! Right now, you're at <%=weight%> kgs, and guess what? You're already taking some fantastic steps towards your goal! To get to your ideal weight, we'll aim for a daily intake of <%=cal_con_goal%> calories and burning off <%=cal_burn_goal  %> calories through activity every day.

            Now, here's the exciting part: every week, with your dedication and these smart choices, you'll see progress! Keep track of your journey by logging your food and the calories you burn in our food and activity diary. Together, we'll celebrate every milestone as you get closer to feeling your absolute best! You've got this!</p>
          <button id="okButton" class="btn btn-primary">OK</button>
        </div>
      </div>
    </div>
  </div>
  <% } %>
  <% if(locals.dailyTarget=="ExerciseAchieved"){%>
    <div id="popup" class="modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <p>Hey <%=fname  %>, keep up the great work! You're reaching your daily calorie-burning goals, which is fantastic! Remember, taking time to rest is just as important as staying active. Keep going strong!</p>
            <button id="okButton" class="btn btn-primary">OK</button>
          </div>
        </div>
      </div>
    </div>
    <% }else if(locals.dailyTarget=="FoodAchieved"){%>
      <div id="popup" class="modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
              <p>Hey <%=fname  %>, great job on reaching your daily calorie consumption goal! Keep up the good work! Remember, it's important to listen to your body's needs and aim to meet your prescribed calorie level to maintain a healthy balance.</p>
              <button id="okButton" class="btn btn-primary">OK</button>
            </div>
          </div>
        </div>
      </div>
      <% } %>
      <% if(locals.wkTarget=="achieved"){%> 
        <div id="popup2" class="modal">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <p>Hey <%=fname  %>, Congratulations on achieving your weekly target and also your daily target</p>
                <button id="okButton2" class="btn btn-primary">OK</button>
              </div>
            </div>
          </div>
        </div>
        <% }else if(locals.congrats=="congrats"){%> 
        <div id="popup2" class="modal">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <p>Hey <%=fname  %>, Congratulations on achieving both your calorie consumption and burning goals today! You're truly unstoppable! Keep up the amazing work and keep striving for greatness!</p>
                <button id="okButton2" class="btn btn-primary">OK</button>
              </div>
            </div>
          </div>
        </div>
        <% } %>
        

  <div class="container">
    <div class="card" style="width:400px">
      <img class="card-img-top" src="/logExercise.jpg" alt="Card image" style="width:100%">
      <div class="card-body">
        <h4 class="card-title">Log Exercise</h4>
        <p class="card-text">You can log food</p>
        <a onclick="window.location.href='/logExercise?username=<%=username  %>'" class="btn btn-primary">Log Exercise</a>
      </div>
    </div>
    <div class="card" style="width:400px">
      <img class="card-img-top" src="/logFood.jpg" alt="Card image" style="width:100%">
      <div class="card-body">
        <h4 class="card-title">Log food</h4>
        <p class="card-text">You can log food  </p>
        <a onclick="window.location.href='/logFood?username=<%=username  %>'" class="btn btn-primary">Log Food</a>
      </div>
    </div>
    <div class="card" style="width:400px">
      <img class="card-img-top" src="/progressImage.jpg" alt="Card image" style="width:100%">
      <div class="card-body">
        <h4 class="card-title">view progress</h4>
        <p class="card-text">You can view progress here </p>
        <a onclick="window.location.href='/viewProgress?username=<%=username  %>'" class="btn btn-primary">view progress</a>
      </div>
    </div>


  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    const popup = $('#popup');
    const popup2 = $('#popup2');
    popup.modal('show');
  
    // Add event listener to the first OK button
    $('#okButton').on('click', function() {
      popup.modal('hide');
      popup2.modal('show'); // Show the second modal after the first one is hidden
    });
  
    // Add event listener to the second OK button
    $('#okButton2').on('click', function() {
      popup2.modal('hide');
    });
  });
  
</script>
  
</body>
</html>